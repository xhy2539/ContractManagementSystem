<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/layout}">
<head>
    <meta charset="UTF-8">
    <title>仪表盘</title>
    <style layout:fragment="inline-css">
        .dashboard-card {
            margin-bottom: 1.5rem;
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
            transition: transform .2s ease-in-out;
        }
        .dashboard-card:hover {
            transform: translateY(-5px);
        }
        .dashboard-card .card-header {
            background-color: #e9ecef; /* Lighter header for cards */
            font-weight: 500;
            border-bottom: 1px solid rgba(0,0,0,.125);
        }
        .dashboard-card .list-group-item a {
            text-decoration: none;
            color: #0d6efd; /* Bootstrap primary blue */
        }
        .dashboard-card .list-group-item a:hover {
            color: #0a58ca; /* Darker blue on hover */
            text-decoration: underline;
        }
        .dashboard-card .list-group-item i {
            margin-right: 0.5rem;
            width: 1.2em; /* Consistent icon width */
        }
        .welcome-message {
            padding: 1.5rem;
            margin-bottom: 2rem;
            background-color: #cfe2ff; /* Light blue background */
            border-radius: 0.375rem;
            border: 1px solid #b6d4fe;
        }
        .welcome-message h1 {
            color: #07408c;
        }
    </style>
</head>
<body>

<section layout:fragment="content">
    <div class="container-fluid mt-4">

        <div class="welcome-message text-center">
            <h1 class="display-5">欢迎, <span sec:authentication="name" class="fw-bold">用户</span>!</h1>
            <p class="lead">欢迎使用合同管理系统。请从下方选择您要操作的功能模块。</p>
        </div>

        <div class="row">
            <div class="col-lg-6 col-xl-4" sec:authorize="hasRole('ROLE_ADMIN')">
                <div class="card dashboard-card">
                    <div class="card-header">
                        <i class="bi bi-gear-fill me-2"></i>系统管理
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item"><a th:href="@{/admin/users}"><i class="bi bi-people-fill"></i>用户管理</a></li>
                        <li class="list-group-item"><a th:href="@{/admin/roles}"><i class="bi bi-shield-lock-fill"></i>角色管理</a></li>
                        <li class="list-group-item"><a th:href="@{/admin/functionalities}"><i class="bi bi-gear-wide-connected"></i>功能管理</a></li>
                        <li class="list-group-item"><a th:href="@{/admin/contract-assignments}"><i class="bi bi-person-lines-fill"></i>合同分配</a></li>
                        <li class="list-group-item"><a th:href="@{/admin/audit-logs}"><i class="bi bi-journals"></i>审计日志管理</a></li>
                    </ul>
                </div>
            </div>

            <div class="col-lg-6 col-xl-4" sec:authorize="isAuthenticated()">
                <div class="card dashboard-card">
                    <div class="card-header">
                        <i class="bi bi-file-earmark-text-fill me-2"></i>合同管理
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item"><a th:href="@{/contract-manager/draft-contract}"><i class="bi bi-file-earmark-plus-fill"></i>起草合同</a></li>
                        <li class="list-group-item"><a th:href="@{/contract-manager/pending-countersign}"><i class="bi bi-people-fill"></i>待会签合同</a></li>
                        <li class="list-group-item" sec:authorize="hasAuthority('CON_FINAL_VIEW')"><a th:href="@{/contract-manager/pending-finalization}"><i class="bi bi-file-earmark-check-fill"></i>待定稿合同</a></li>
                        <li class="list-group-item"><a th:href="@{/contract-manager/pending-approval}"><i class="bi bi-check-circle-fill"></i>待审批合同</a></li>
                        <li class="list-group-item"><a th:href="@{/contract-manager/pending-signing}"><i class="bi bi-pen-fill"></i>待签订合同</a></li>
                        <li class="list-group-item"><a th:href="@{/contract-manager/view-all}"><i class="bi bi-folder-fill"></i>查看我的合同</a></li>
                    </ul>
                </div>
            </div>

            <div class="col-lg-6 col-xl-4" sec:authorize="hasAnyRole('ROLE_ADMIN', 'ROLE_DATA_MANAGER')">
                <div class="card dashboard-card">
                    <div class="card-header">
                        <i class="bi bi-database-fill-gear me-2"></i>基础数据管理
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item"><a th:href="@{/customers}"><i class="bi bi-person-badge-fill"></i>客户信息管理</a></li>
                    </ul>
                </div>
            </div>

            <div class="col-lg-6 col-xl-4" sec:authorize="hasAnyRole('ROLE_ADMIN', 'ROLE_CONTRACT_OPERATOR')">
                <div class="card dashboard-card">
                    <div class="card-header">
                        <i class="bi bi-search me-2"></i>查询统计
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item"><a th:href="@{/reports/contract-status}"><i class="bi bi-pie-chart-fill"></i>合同状态统计</a></li>
                        <li class="list-group-item"><a th:href="@{/reports/contract-search}"><i class="bi bi-file-text-fill"></i>合同查询</a></li>
                    </ul>
                </div>
            </div>

        </div> </div> </section>

</body>
</html>