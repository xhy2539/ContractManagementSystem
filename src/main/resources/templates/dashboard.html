<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/layout}">
<head>
    <meta charset="UTF-8">
    <title>仪表盘</title>
    <style layout:fragment="inline-css">
        /* 现代化仪表板样式 */
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .main-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .welcome-message {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .welcome-message h1 {
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .welcome-message .lead {
            opacity: 0.9;
        }

        .dashboard-card {
            margin-bottom: 2rem;
            border: none;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: white;
            overflow: hidden;
            position: relative;
        }

        .dashboard-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .dashboard-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
        }

        .dashboard-card:hover::before {
            opacity: 1;
        }

        .dashboard-card .card-header {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-bottom: 1px solid rgba(0,0,0,0.05);
            font-weight: 600;
            font-size: 1.1rem;
            padding: 1.5rem 1.5rem 1rem;
            color: #495057;
        }

        .dashboard-card .card-header i {
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.2rem;
        }

        .dashboard-card .list-group-item {
            border: none;
            padding: 1rem 1.5rem;
            transition: all 0.2s ease;
            position: relative;
        }

        .dashboard-card .list-group-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            transform: scaleY(0);
            transition: transform 0.2s ease;
        }

        .dashboard-card .list-group-item:hover {
            background-color: #f8f9fa;
            transform: translateX(5px);
        }

        .dashboard-card .list-group-item:hover::before {
            transform: scaleY(1);
        }

        .dashboard-card .list-group-item a {
            text-decoration: none;
            color: #495057;
            display: flex;
            align-items: center;
            font-weight: 500;
            transition: color 0.2s ease;
        }

        .dashboard-card .list-group-item a:hover {
            color: #667eea;
        }

        .dashboard-card .list-group-item i {
            margin-right: 0.75rem;
            width: 20px;
            color: #667eea;
            transition: transform 0.2s ease;
        }

        .dashboard-card .list-group-item:hover i {
            transform: scale(1.1);
        }

        .pending-tasks-header {
            background: linear-gradient(135deg, #ffc107 0%, #ff8c00 100%);
            color: white;
            border: none;
        }

        .pending-tasks-header i {
            color: white !important;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .task-item {
            background: white;
            border-radius: 10px;
            margin: 0.5rem 0;
            padding: 1rem;
            border-left: 4px solid #667eea;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.2s ease;
        }

        .task-item:hover {
            transform: translateX(5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        }

        .btn-process-task {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            color: white;
            border-radius: 20px;
            padding: 0.5rem 1rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .btn-process-task:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
            color: white;
        }

        .stats-badge {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 15px;
            padding: 0.5rem 1rem;
            color: white;
            font-weight: 600;
            box-shadow: 0 3px 10px rgba(102, 126, 234, 0.3);
            transition: all 0.2s ease;
        }

        .stats-badge:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.5);
        }

        .stats-badge-link {
            color: white !important;
            text-decoration: none !important;
        }

        .alert-info {
            background: linear-gradient(135deg, #d1ecf1, #bee5eb);
            border: none;
            border-radius: 15px;
            color: #0c5460;
            box-shadow: 0 5px 15px rgba(13, 202, 240, 0.2);
        }

        .quick-access-title {
            color: #495057;
            font-weight: 700;
            font-size: 2rem;
            margin-bottom: 3rem;
            text-align: center;
            position: relative;
        }

        .quick-access-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 2px;
        }

        /* 创新的卡片布局 */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            padding: 0 1rem;
        }

        .card-wrapper {
            position: relative;
        }

        /* 每个卡片的独特样式 */
        .card-wrapper:nth-child(1) .creative-card {
            transform: rotate(-2deg);
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .card-wrapper:nth-child(2) .creative-card {
            transform: rotate(1deg);
            background: linear-gradient(135deg, #ff9a9e, #fecfef);
            margin-top: 2rem;
        }

        .card-wrapper:nth-child(3) .creative-card {
            transform: rotate(-1deg);
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            margin-top: -1rem;
        }

        .card-wrapper:nth-child(4) .creative-card {
            transform: rotate(2deg);
            background: linear-gradient(135deg, #ffd89b, #19547b);
            color: white;
            margin-top: 1.5rem;
        }

        .card-wrapper:nth-child(5) .creative-card {
            transform: rotate(-1.5deg);
            background: linear-gradient(135deg, #89f7fe, #66a6ff);
            margin-top: -0.5rem;
        }

        .card-wrapper:nth-child(6) .creative-card {
            transform: rotate(1.5deg);
            background: linear-gradient(135deg, #fdbb2d, #22c1c3);
            margin-top: 1rem;
        }

        .creative-card {
            border: none;
            border-radius: 20px;
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.1),
                0 5px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            overflow: hidden;
            position: relative;
            backdrop-filter: blur(10px);
        }

        .creative-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.1), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .creative-card:hover {
            transform: rotate(0deg) translateY(-15px) scale(1.05);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.2),
                0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .creative-card:hover::before {
            opacity: 1;
        }

        .creative-card .card-header {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: none;
            padding: 2rem 1.5rem 1rem;
            text-align: center;
            position: relative;
        }

        .creative-card .card-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 2px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 1px;
        }

        .creative-card .card-header i {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            display: block;
            color: inherit;
            background: none;
            -webkit-background-clip: unset;
            -webkit-text-fill-color: unset;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .creative-card .card-header .card-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin: 0;
            color: inherit;
        }

        .creative-card .list-group {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }

        .creative-card .list-group-item {
            background: transparent;
            border: none;
            padding: 1rem 1.5rem;
            transition: all 0.3s ease;
            position: relative;
            color: #333;
        }

        .creative-card .list-group-item::before {
            display: none;
        }

        .creative-card .list-group-item:hover {
            background: rgba(255, 255, 255, 0.5);
            transform: translateX(10px);
        }

        .creative-card .list-group-item a {
            color: #333;
            font-weight: 600;
            display: flex;
            align-items: center;
            text-decoration: none;
        }

        .creative-card .list-group-item a:hover {
            color: #333;
        }

        .creative-card .list-group-item i {
            margin-right: 1rem;
            font-size: 1.1rem;
            color: #667eea;
            width: 20px;
        }

        /* 特殊卡片的文字颜色调整 */
        .card-wrapper:nth-child(1) .creative-card .list-group-item a,
        .card-wrapper:nth-child(4) .creative-card .list-group-item a {
            color: #333 !important;
        }

        /* 动画效果 */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card-wrapper {
            animation: fadeInUp 0.6s ease forwards;
            opacity: 0;
        }

        .card-wrapper:nth-child(1) { animation-delay: 0.1s; }
        .card-wrapper:nth-child(2) { animation-delay: 0.2s; }
        .card-wrapper:nth-child(3) { animation-delay: 0.3s; }
        .card-wrapper:nth-child(4) { animation-delay: 0.4s; }
        .card-wrapper:nth-child(5) { animation-delay: 0.5s; }
        .card-wrapper:nth-child(6) { animation-delay: 0.6s; }

        /* 响应式设计优化 */
        @media (max-width: 768px) {
            .welcome-message {
                padding: 1.5rem;
            }
            
            .welcome-message h1 {
                font-size: 2rem;
            }
            
            .cards-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
                padding: 0;
            }
            
            .card-wrapper .creative-card {
                transform: none !important;
                margin-top: 0 !important;
            }
            
            .main-container {
                border-radius: 15px;
                padding: 1.5rem;
            }
        }

        /* 特殊样式 */
        .action-icon {
            margin-right: 0.75rem;
            width: 1.5em;
            font-size: 1.1rem;
        }

        .task-details {
            font-size: 0.85em;
            color: #6c757d;
            margin-top: 0.5rem;
        }

        .badge {
            border-radius: 15px;
            padding: 0.5rem 1rem;
            font-weight: 600;
        }

        .bg-primary { background: linear-gradient(135deg, #007bff, #0056b3) !important; }
        .bg-warning { background: linear-gradient(135deg, #ffc107, #e0a800) !important; }
        .bg-danger { background: linear-gradient(135deg, #dc3545, #c82333) !important; }
        .bg-info { background: linear-gradient(135deg, #17a2b8, #138496) !important; }
    </style>
</head>
<body>

<section layout:fragment="content">
    <div class="container-fluid mt-4">

        <div class="welcome-message">
            <h1 class="display-5">欢迎回来, <span sec:authentication="name" class="fw-bold">用户</span>!</h1>
            <p class="lead">今天是美好的一天，让我们开始高效的合同管理工作吧</p>
        </div>

        <div class="card dashboard-card"
             th:if="${(pendingTasks != null && not #lists.isEmpty(pendingTasks)) || (adminPendingAssignmentCount != null && adminPendingAssignmentCount > 0)}">
            <div class="card-header pending-tasks-header">
                <i class="bi bi-exclamation-triangle-fill me-2"></i>
                <strong>待处理事项</strong>
            </div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item"
                        sec:authorize="hasRole('ROLE_ADMIN')"
                        th:if="${adminPendingAssignmentCount != null && adminPendingAssignmentCount > 0}">
                        <div class="task-item d-flex justify-content-between align-items-center">
                            <div>
                                <i class="bi bi-person-plus-fill text-danger action-icon"></i>
                                <strong>您有 <span th:text="${adminPendingAssignmentCount}" class="fw-bold text-danger">0</span> 份合同等待分配处理人员</strong>
                            </div>
                            <a th:href="@{/admin/contract-assignments}" class="btn btn-process-task">
                                去分配 <i class="bi bi-arrow-right-short"></i>
                            </a>
                        </div>
                    </li>

                    <th:block th:if="${pendingTasks != null && not #lists.isEmpty(pendingTasks)}">
                        <li class="list-group-item" th:each="task : ${pendingTasks}">
                            <div class="task-item d-flex justify-content-between align-items-center">
                                <div>
                                    <i th:classappend="${task.type.name() == 'COUNTERSIGN' ? 'bi-person-check-fill text-info action-icon' : (task.type.name() == 'APPROVAL' ? 'bi-clipboard-check-fill text-success action-icon' : (task.type.name() == 'SIGNING' ? 'bi-pen-fill text-primary action-icon' : (task.type.name() == 'FINALIZE' ? 'bi-file-earmark-check-fill text-warning action-icon' : (task.type.name() == 'EXTENSION_REQUEST' ? 'bi-calendar-plus-fill text-warning action-icon' : 'bi-question-circle-fill action-icon'))))}"></i>
                                    <strong><span th:text="${task.contractName ?: '未知合同'}">合同名称</span></strong> -
                                    <span th:text="${task.typeDescription}">需要您会签</span>
                                    <div class="task-details">
                                        合同编号: <span th:text="${task.contractNumber ?: 'N/A'}"></span> |
                                        起草人: <span th:text="${task.drafterUsername ?: 'N/A'}"></span> |
                                        流程创建时间: <span th:text="${task.createdAt != null ? #temporals.format(task.createdAt, 'yyyy-MM-dd HH:mm') : 'N/A'}"></span>
                                    </div>
                                </div>
                                <th:block th:switch="${task.type.name()}">
                                    <a th:case="'COUNTERSIGN'" th:href="@{/contract-manager/countersign-form/{id}(id=${task.contractId})}" class="btn btn-process-task">
                                        去会签 <i class="bi bi-arrow-right-short"></i>
                                    </a>
                                    <a th:case="'APPROVAL'" th:href="@{/contract-manager/approval-details/{id}(id=${task.contractId})}" class="btn btn-process-task">
                                        去审批 <i class="bi bi-arrow-right-short"></i>
                                    </a>
                                    <a th:case="'SIGNING'" th:href="@{/contract-manager/sign-contract/{id}(id=${task.processId})}" class="btn btn-process-task">
                                        去签订 <i class="bi bi-arrow-right-short"></i>
                                    </a>
                                    <a th:case="'FINALIZE'" th:href="@{/contract-manager/finalize/{id}(id=${task.contractId})}" class="btn btn-process-task">
                                        去定稿 <i class="bi bi-arrow-right-short"></i>
                                    </a>
                                    <a th:case="'EXTENSION_REQUEST'" th:href="@{/admin/approve-extension-request/{id}(id=${task.processId})}" class="btn btn-process-task" sec:authorize="hasAuthority('CON_EXTEND_APPROVAL_VIEW')">
                                        去处理 <i class="bi bi-arrow-right-short"></i>
                                    </a>
                                    <a th:case="*" href="#" class="btn btn-sm btn-outline-secondary btn-process-task disabled" title="未知任务类型，无法直接处理">
                                        查看 <i class="bi bi-info-circle"></i>
                                    </a>
                                </th:block>
                            </div>
                        </li>
                    </th:block>
                </ul>
            </div>
        </div>

        <div th:if="${(pendingTasks == null || #lists.isEmpty(pendingTasks)) && (adminPendingAssignmentCount == null || adminPendingAssignmentCount == 0)}" class="alert alert-info">
            <i class="bi bi-check-circle-fill me-2"></i>太棒了！您当前没有待处理事项，工作进展顺利 🎉
        </div>

        <h2 class="quick-access-title" th:if="${#authorization.expression('isAuthenticated()')}">快速访问</h2>
        
        <div class="cards-grid">
            <div class="card-wrapper" sec:authorize="hasRole('ROLE_ADMIN')">
                <div class="card creative-card">
                    <div class="card-header">
                        <i class="bi bi-gear-fill"></i>
                        <h5 class="card-title">系统管理</h5>
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item"><a th:href="@{/admin/users}"><i class="bi bi-people-fill"></i>用户管理</a></li>
                        <li class="list-group-item"><a th:href="@{/admin/roles}"><i class="bi bi-shield-lock-fill"></i>角色管理</a></li>
                        <li class="list-group-item"><a th:href="@{/admin/functionalities}"><i class="bi bi-gear-wide-connected"></i>功能管理</a></li>
                        <li class="list-group-item"><a th:href="@{/admin/contract-assignments}"><i class="bi bi-person-lines-fill"></i>合同分配</a></li>
                        <li class="list-group-item"><a th:href="@{/admin/audit-logs}"><i class="bi bi-journals"></i>审计日志管理</a></li>
                        <li class="list-group-item" sec:authorize="hasAuthority('CON_EXTEND_APPROVAL_VIEW')">
                            <a th:href="@{/admin/approve-extension-request}"><i class="bi bi-calendar-plus-fill"></i>延期请求审批</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="card-wrapper" sec:authorize="isAuthenticated()">
                <div class="card creative-card">
                    <div class="card-header">
                        <i class="bi bi-file-earmark-text-fill"></i>
                        <h5 class="card-title">合同管理</h5>
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item" sec:authorize="hasAuthority('CON_DRAFT_NEW')"><a th:href="@{/contract-manager/draft-contract}"><i class="bi bi-file-earmark-plus-fill"></i>起草合同</a></li>
                        <li class="list-group-item" sec:authorize="hasAuthority('CON_CSIGN_VIEW')"><a th:href="@{/contract-manager/pending-countersign}"><i class="bi bi-person-check-fill"></i>待会签合同</a></li>
                        <li class="list-group-item" sec:authorize="hasAuthority('CON_FINAL_VIEW')"><a th:href="@{/contract-manager/pending-finalization}"><i class="bi bi-file-earmark-check-fill"></i>待定稿合同</a></li>
                        <li class="list-group-item" sec:authorize="hasAuthority('CON_APPROVE_VIEW')"><a th:href="@{/contract-manager/pending-approval}"><i class="bi bi-clipboard-check-fill"></i>待审批合同</a></li>
                        <li class="list-group-item" sec:authorize="hasAuthority('CON_SIGN_VIEW')"><a th:href="@{/contract-manager/pending-signing}"><i class="bi bi-pen-fill"></i>待签订合同</a></li>
                        <li class="list-group-item" sec:authorize="hasAuthority('CON_VIEW_MY') or hasRole('ROLE_ADMIN')">
                            <a th:href="@{/contract-manager/view-all}"><i class="bi bi-folder-fill"></i>我的合同查询</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="card-wrapper" sec:authorize="hasAnyRole('ROLE_ADMIN', 'ROLE_DATA_MANAGER', 'ROLE_CUSTOMER_MANAGER')">
                <div class="card creative-card">
                    <div class="card-header">
                        <i class="bi bi-database-fill-gear"></i>
                        <h5 class="card-title">基础数据管理</h5>
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item" sec:authorize="hasAuthority('CUSTOMER_VIEW_LIST') or hasRole('ROLE_ADMIN')">
                            <a th:href="@{/customers}"><i class="bi bi-person-badge-fill"></i>客户信息管理</a>
                        </li>
                        <li class="list-group-item" sec:authorize="hasAuthority('QUERY_CONTRACT_INFO') or hasRole('ROLE_ADMIN')">
                            <a th:href="@{/contract-info-manager}"><i class="bi bi-file-text-fill"></i>合同信息管理</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="card-wrapper" sec:authorize="hasAnyRole('ROLE_ADMIN', 'ROLE_CONTRACT_OPERATOR', 'ROLE_REPORTER')">
                <div class="card creative-card">
                    <div class="card-header">
                        <i class="bi bi-search"></i>
                        <h5 class="card-title">查询统计</h5>
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item" sec:authorize="hasAuthority('QUERY_CONTRACT_INFO') or hasRole('ROLE_ADMIN')">
                            <a th:href="@{/reports/contract-search}"><i class="bi bi-file-text-fill"></i>合同综合查询</a>
                        </li>
                        <li class="list-group-item" sec:authorize="hasAuthority('REPORT_STATUS_VIEW') or hasRole('ROLE_ADMIN')">
                            <a th:href="@{/reports/contract-status}"><i class="bi bi-pie-chart-fill"></i>合同状态统计</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="card-wrapper" sec:authorize="isAuthenticated()">
                <div class="card creative-card">
                    <div class="card-header">
                        <i class="bi bi-bar-chart-line-fill"></i>
                        <h5 class="card-title">系统概览</h5>
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            已生效合同总数
                            <span class="badge stats-badge">
                                <a th:href="@{/contract-manager/view-all(status='ACTIVE')}"
                                   class="stats-badge-link"
                                   title="点击查看所有有效合同"
                                   th:text="${systemStats?.activeContractsCount != null ? systemStats.activeContractsCount : 'N/A'}">0</a>
                            </span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            即将到期合同 (30天内)
                            <span class="badge bg-warning">
                                <a th:href="@{/contract-manager/view-all(expiringSoon='true', status='ACTIVE')}"
                                   class="stats-badge-link text-dark"
                                   title="点击查看即将到期的有效合同"
                                   th:text="${systemStats?.expiringSoonCount != null ? systemStats.expiringSoonCount : 'N/A'}">0</a>
                            </span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            已过期合同总数
                            <span class="badge bg-danger">
                                <a th:href="@{/contract-manager/view-all(status='EXPIRED')}"
                                   class="stats-badge-link"
                                   title="点击查看所有已过期合同"
                                   th:text="${systemStats?.expiredContractsCount != null ? systemStats.expiredContractsCount : 'N/A'}">0</a>
                            </span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            流程中合同总数
                            <span class="badge bg-info">
                                <a th:href="@{/reports/contract-search(status='PENDING_ASSIGNMENT,PENDING_COUNTERSIGN,PENDING_APPROVAL,PENDING_SIGNING,PENDING_FINALIZATION')}"
                                   class="stats-badge-link"
                                   title="点击查看所有流程中合同"
                                   th:text="${systemStats?.inProcessContractsCount != null ? systemStats.inProcessContractsCount : 'N/A'}">0</a>
                            </span>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="card-wrapper" sec:authorize="hasAuthority('TEMP_VIEW_LIST')">
                <div class="card creative-card">
                    <div class="card-header">
                        <i class="bi bi-file-earmark-text-fill"></i>
                        <h5 class="card-title">模板管理</h5>
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                            <a th:href="@{/admin/templates}"><i class="bi bi-file-earmark-text-fill"></i>合同模板管理</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="card-wrapper" sec:authorize="hasAnyRole('ADMIN', 'CONTRACT_OPERATOR')">
                <div class="card creative-card">
                    <div class="card-header">
                        <i class="bi bi-cpu-fill"></i>
                        <h5 class="card-title">合同智能分析</h5>
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                            <a th:href="@{/contract-analysis}"><i class="bi bi-graph-up-arrow"></i>风险分析与识别</a>
                        </li>
                        <li class="list-group-item">
                            <a th:href="@{/contract-analysis}"><i class="bi bi-file-diff"></i>版本对比分析</a>
                        </li>
                        <li class="list-group-item">
                            <a th:href="@{/contract-analysis}"><i class="bi bi-bell-fill"></i>智能提醒管理</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>

</body>
</html>