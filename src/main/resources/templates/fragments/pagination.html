<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<meta charset="UTF-8">
<nav th:fragment="paginationbar (page, baseUrl, additionalParams)"
     th:if="${page != null && page.totalPages > 0}"
     aria-label="Page navigation">
    <ul class="pagination justify-content-center flex-wrap">

        <li class="page-item" th:classappend="${page.first} ? 'disabled'">
            <a class="page-link"
               th:href="${page.first} ? '#' : @{${baseUrl}(page=${page.number - 1}, size=${page.size}, ${additionalParams})}"
               aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
            </a>
        </li>

        <th:block th:with="
            maxVisiblePages=5,
            currentPage=${page.number},
            totalPages=${page.totalPages},
            startPage=${T(java.lang.Math).max(0, currentPage - (maxVisiblePages / 2))},
            endPage=${T(java.lang.Math).min(totalPages - 1, startPage + maxVisiblePages - 1)},
            correctedStartPage=${T(java.lang.Math).max(0, endPage - maxVisiblePages + 1)}">

            <li class="page-item" th:if="${correctedStartPage > 0}">
                <a class="page-link" th:href="@{${baseUrl}(page=0, size=${page.size}, ${additionalParams})}">1</a>
            </li>
            <li class="page-item disabled" th:if="${correctedStartPage > 1}">
                <span class="page-link">...</span>
            </li>

            <li class="page-item"
                th:each="i : ${#numbers.sequence(correctedStartPage, endPage)}"
                th:classappend="${i == currentPage} ? 'active'">
                <a class="page-link" th:href="@{${baseUrl}(page=${i}, size=${page.size}, ${additionalParams})}" th:text="${i + 1}"></a>
            </li>

            <li class="page-item disabled" th:if="${endPage < totalPages - 2}">
                <span class="page-link">...</span>
            </li>
            <li class="page-item" th:if="${endPage < totalPages - 1}">
                <a class="page-link" th:href="@{${baseUrl}(page=${totalPages - 1}, size=${page.size}, ${additionalParams})}" th:text="${totalPages}"></a>
            </li>
        </th:block>

        <li class="page-item" th:classappend="${page.last} ? 'disabled'">
            <a class="page-link"
               th:href="${page.last} ? '#' : @{${baseUrl}(page=${page.number + 1}, size=${page.size}, ${additionalParams})}"
               aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
            </a>
        </li>
    </ul>
</nav>

</body>
</html>